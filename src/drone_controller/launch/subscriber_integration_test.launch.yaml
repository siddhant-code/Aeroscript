launch:

################################################
# 1.) tag: catch2_launch_file  (required)
################################################
- catch2_launch_file:
    description: 'A Catch2 integration test launch file for subscriber node'

################################################
# 2.) launch arguments
################################################
- arg:
    name: 'test_duration'
    default: '5.0'
    description: 'Max length of test in seconds.'

################################################
# 3.) Auxiliary nodes (i.e, nodes under test)
################################################
# start mavic_controller (subscriber node under test)
# The CSV file path will be automatically resolved using ament_index_cpp
# to the installed location: <pkg_share>/config/letters_AZ_cad.csv
- node:
    pkg: "drone_controller"        # A package you want to test
    exec: "mavic_controller"              # An executable in the package
    # csv_file parameter is optional - if not provided, uses installed location

############################################################################
# 4.) tag: catch2_integration_test_node (i.e., node which performs the test)
############################################################################
- catch2_integration_test_node:
    pkg: "drone_controller"
    exec: "subscriber_integration_test"
    param:
    -
      name: 'test_duration'
      value: '$(var test_duration)'

